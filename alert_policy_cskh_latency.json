{
  "alertStrategy": {
    "autoClose": "1800s"
  },
  "combiner": "OR",
  "conditions": [
    {
      "conditionThreshold": {
        "aggregations": [
          {
            "alignmentPeriod": "300s",
            "crossSeriesReducer": "REDUCE_MEAN",
            "groupByFields": [
              "metric.label.endpoint"
            ],
            "perSeriesAligner": "ALIGN_MEAN"
          }
        ],
        "comparison": "COMPARISON_GT",
        "duration": "300s",
        "evaluationMissingData": "EVALUATION_MISSING_DATA_INACTIVE",
        "filter": "resource.type=\"global\" AND metric.type=\"custom.googleapis.com/cskh/cskh_request_duration_seconds\"",
        "thresholdValue": 1.0
      },
      "displayName": "CSKH API Request Latency High"
    },
    {
      "conditionThreshold": {
        "aggregations": [
          {
            "alignmentPeriod": "300s",
            "crossSeriesReducer": "REDUCE_MEAN",
            "groupByFields": [
              "metric.label.collection"
            ],
            "perSeriesAligner": "ALIGN_MEAN"
          }
        ],
        "comparison": "COMPARISON_GT",
        "duration": "300s",
        "evaluationMissingData": "EVALUATION_MISSING_DATA_INACTIVE",
        "filter": "resource.type=\"global\" AND metric.type=\"custom.googleapis.com/rag/rag_search_duration_seconds\"",
        "thresholdValue": 1.0
      },
      "displayName": "RAG Search Latency High"
    },
    {
      "conditionThreshold": {
        "aggregations": [
          {
            "alignmentPeriod": "300s",
            "crossSeriesReducer": "REDUCE_MEAN",
            "groupByFields": [
              "metric.label.endpoint"
            ],
            "perSeriesAligner": "ALIGN_MEAN"
          }
        ],
        "comparison": "COMPARISON_GT",
        "duration": "300s",
        "evaluationMissingData": "EVALUATION_MISSING_DATA_INACTIVE",
        "filter": "resource.type=\"global\" AND metric.type=\"custom.googleapis.com/a2a/a2a_request_duration_seconds\"",
        "thresholdValue": 1.0
      },
      "displayName": "A2A API Gateway Latency High"
    }
  ],
  "displayName": "CSKH Agent API Latency Alert",
  "documentation": {
    "content": "Alert when CSKH Agent API request latency exceeds 1 second or error rates are high",
    "mimeType": "text/markdown"
  },
  "enabled": true,
  "notificationChannels": [],
  "severity": "WARNING"
}
