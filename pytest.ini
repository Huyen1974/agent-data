[pytest]
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
testpaths = tests
pythonpath = src ADK
norecursedirs = .* build dist CVS _darcs {arch} *.egg venv env
addopts = --strict-markers --cache-clear --randomly-seed=1234 --reruns 3 --reruns-delay 1
env = 
    QDRANT_MOCK=1
    FIRESTORE_MOCK=1
    GOOGLE_CLOUD_MOCK=1
    OPENAI_MOCK=1
    REQUESTS_MOCK=1
    SHADOW_TRAFFIC_MOCK=1
    DISABLE_REAL_SERVICES=1
    PYTEST_CURRENT_TEST=1
markers =
    unit: Fast, isolated tests with minimal dependencies
    slow: Slow tests (e.g., API, database, >10s execution)
    integration: Integration tests requiring external services
    e2e: End-to-end pipeline tests
    mock: Tests using mocked dependencies
    network: Tests requiring network connectivity
    core: Essential functionality tests (always run)
    performance: Performance and load tests
    runtime_optimization: Runtime optimization and performance tests
    ci_runtime: CI runtime validation and monitoring tests
    meta: Meta tests for test count control and validation
    cli140k: CLI140k runtime optimization tests
    cli140k1: CLI140k.1 CI runtime validation tests
    cli140k2: CLI140k.2 CI results validation tests
    cli140k3: CLI140k.3 CI final validation tests
    cli140k4: CLI140k.4 optimized runtime validation tests
    cli140k5: CLI140k.5 non-mock runtime validation tests
    cli140l: CLI140l nightly CI runtime simulation tests
filterwarnings =
    ignore:builtin type SwigPyPacked has no __module__ attribute:DeprecationWarning
    ignore:builtin type SwigPyObject has no __module__ attribute:DeprecationWarning
    ignore:builtin type swigvarlink has no __module__ attribute:DeprecationWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
